<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoodData Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .lucide { width: 1em; height: 1em; stroke: currentColor; stroke-width: 2; fill: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Simple icons as SVG components
        const Calculator = () => <svg className="lucide" viewBox="0 0 24 24"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="m16 10-4 4-4-4"/></svg>;
        const Building = () => <svg className="lucide" viewBox="0 0 24 24"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12h4"/><path d="M6 8h4"/><path d="M6 16h4"/><path d="M14 12h4"/><path d="M14 16h4"/><path d="M14 8h4"/><path d="M6 22h12"/></svg>;
        const Users = () => <svg className="lucide" viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="m22 21-3-3"/><path d="m16 8 2-2"/></svg>;
        const Database = () => <svg className="lucide" viewBox="0 0 24 24"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="m3 5v14c0 3 4 3 9 3s9 0 9-3V5"/><path d="m3 12c0 3 4 3 9 3s9 0 9-3"/></svg>;
        const FileText = () => <svg className="lucide" viewBox="0 0 24 24"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>;

        function GoodDataCalculator() {
            const [activeTab, setActiveTab] = useState('qualification');
            const [templateCode, setTemplateCode] = useState('');
            const [message, setMessage] = useState('');
            
            const [formData, setFormData] = useState({
                prospectName: '',
                clientWebsite: '',
                annualRevenue: '',
                budget: '',
                objectives: '',
                totalWorkspaces: '',
                biWorkspaces: '',
                aiWorkspaces: '',
                llmProvider: '',
                package: '',
                professionalServices: '',
                additionalEnvironments: false,
                samlOidc: false,
                dataCenterRegions: false,
                usageAnalytics: false,
                auditLog: false,
                hipaaCompliance: false,
                aeComments: '',
                financeComments: ''
            });

            const [pricing] = useState({
                platformFee: 36000,
                biWorkspacePrice: 25,
                aiWorkspacePrice: 10,
                advisory: 10000,
                analytics: 37500,
                endToEnd: 100000,
                additionalEnvironments: 12000,
                samlOidc: 3000,
                dataCenterRegions: 5000,
                usageAnalytics: 2500,
                auditLog: 3000,
                hipaaCompliance: 8000,
                llmPackages: {
                    'Customer': { 'Small': 100, 'Medium': 430, 'Large': 750 },
                    'GoodData': { 'Small': 200, 'Medium': 860, 'Large': 1500 }
                }
            });

            const handleInputChange = (field, value) => {
                setFormData(prev => {
                    const newData = { ...prev, [field]: value };
                    if (field === 'totalWorkspaces') {
                        newData.biWorkspaces = value;
                    }
                    return newData;
                });
            };

            const calculateTotal = () => {
                const bi = parseInt(formData.biWorkspaces) || 0;
                const ai = parseInt(formData.aiWorkspaces) || 0;
                
                let total = pricing.platformFee + (bi * pricing.biWorkspacePrice * 12) + (ai * pricing.aiWorkspacePrice * 12);
                
                if (formData.llmProvider && formData.package) {
                    const monthlyCost = pricing.llmPackages[formData.llmProvider]?.[formData.package] || 0;
                    total += monthlyCost * 12;
                }
                
                if (formData.professionalServices === 'Advisory') total += pricing.advisory;
                if (formData.professionalServices === 'Analytics') total += pricing.analytics;
                if (formData.professionalServices === 'End-to-end') total += pricing.endToEnd;
                if (formData.additionalEnvironments) total += pricing.additionalEnvironments;
                if (formData.samlOidc) total += pricing.samlOidc;
                if (formData.dataCenterRegions) total += pricing.dataCenterRegions;
                if (formData.usageAnalytics) total += pricing.usageAnalytics;
                if (formData.auditLog) total += pricing.auditLog;
                if (formData.hipaaCompliance) total += pricing.hipaaCompliance;
                
                return total;
            };

            const generateCode = () => {
                let companyPart = 'PROSPECT';
                if (formData.prospectName) {
                    companyPart = formData.prospectName
                        .replace(/[^a-zA-Z0-9]/g, '')
                        .toUpperCase()
                        .substring(0, 8);
                }
                
                const now = new Date();
                const monthNames = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 
                                    'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];
                const month = monthNames[now.getMonth()];
                const day = now.getDate().toString().padStart(2, '0');
                
                return `${companyPart}-${month}${day}`;
            };

            const saveQuote = () => {
                if (!formData.prospectName) {
                    setMessage('âŒ Please enter a prospect name before saving');
                    setTimeout(() => setMessage(''), 3000);
                    return;
                }

                const code = generateCode();
                try {
                    localStorage.setItem(`quote_${code}`, JSON.stringify(formData));
                    setMessage(`âœ… Quote saved: ${code}`);
                    setTimeout(() => setMessage(''), 3000);
                } catch (e) {
                    setMessage('âš ï¸ Quote saved in memory for this session');
                    setTimeout(() => setMessage(''), 3000);
                }
            };

            const loadQuote = () => {
                if (!templateCode.trim()) {
                    setMessage('âŒ Please enter a quote code');
                    setTimeout(() => setMessage(''), 3000);
                    return;
                }

                try {
                    const saved = localStorage.getItem(`quote_${templateCode.toUpperCase()}`);
                    if (saved) {
                        setFormData(JSON.parse(saved));
                        setMessage(`âœ… Quote "${templateCode.toUpperCase()}" loaded!`);
                        setTemplateCode('');
                        setTimeout(() => setMessage(''), 3000);
                    } else {
                        setMessage(`âŒ Quote "${templateCode.toUpperCase()}" not found`);
                        setTimeout(() => setMessage(''), 3000);
                    }
                } catch (e) {
                    setMessage('âŒ Error loading quote');
                    setTimeout(() => setMessage(''), 3000);
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 via-white to-violet-50 p-4">
                    <div className="max-w-6xl mx-auto">
                        
                        {/* Header */}
                        <div className="bg-gradient-to-r from-green-600 to-emerald-500 rounded-xl shadow-xl text-white p-6 mb-6">
                            <div className="flex items-center gap-4">
                                <div className="bg-white/20 p-3 rounded-xl">
                                    <Database />
                                </div>
                                <div>
                                    <h1 className="text-2xl font-bold mb-2">ðŸŽ¯ GOODDATA CALCULATOR!</h1>
                                    <div className="text-sm bg-white/20 rounded-lg p-3">
                                        <strong>Professional pricing tool!</strong> Save quotes with simple codes, share with your team!
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Main Calculator */}
                        <div className="bg-white rounded-2xl shadow-xl border border-gray-100 p-8 mb-8">
                            <div className="flex items-center gap-4 mb-6">
                                <h1 className="text-3xl font-bold bg-gradient-to-r from-purple-900 to-pink-500 bg-clip-text text-transparent">
                                    GoodData Pricing Calculator
                                </h1>
                                <div className="bg-gradient-to-r from-purple-900 to-pink-500 p-3 rounded-xl">
                                    <Calculator className="w-8 h-8 text-white" />
                                </div>
                            </div>
                            
                            <div className="grid md:grid-cols-2 gap-4 mb-6">
                                <input 
                                    type="text"
                                    placeholder="Prospect/Customer Name"
                                    className="w-full p-3 text-lg border border-gray-300 rounded-lg"
                                    value={formData.prospectName}
                                    onChange={(e) => handleInputChange('prospectName', e.target.value)}
                                />
                                <input 
                                    type="url"
                                    placeholder="Client Website"
                                    className="w-full p-3 text-lg border border-gray-300 rounded-lg"
                                    value={formData.clientWebsite}
                                    onChange={(e) => handleInputChange('clientWebsite', e.target.value)}
                                />
                            </div>
                            
                            {/* Quote Management */}
                            <div className="bg-gradient-to-br from-blue-600 to-indigo-500 rounded-xl text-white p-6 mb-6">
                                <h2 className="text-xl font-semibold mb-4">ðŸ’¾ Quote Management</h2>
                                
                                <div className="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <h3 className="font-semibold mb-2">Load Quote</h3>
                                        <div className="flex gap-2">
                                            <input 
                                                type="text"
                                                placeholder="Enter code (e.g., MICROSOFT-JUN12)"
                                                value={templateCode}
                                                onChange={(e) => setTemplateCode(e.target.value)}
                                                className="flex-1 p-2 text-gray-900 rounded"
                                            />
                                            <button
                                                onClick={loadQuote}
                                                className="px-4 py-2 bg-white text-blue-600 font-semibold rounded hover:bg-gray-50"
                                            >
                                                LOAD
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <h3 className="font-semibold mb-2">Save Quote</h3>
                                        <button
                                            onClick={saveQuote}
                                            disabled={!formData.prospectName}
                                            className="w-full bg-white text-blue-600 font-semibold py-2 px-4 rounded hover:bg-gray-50 disabled:opacity-50"
                                        >
                                            ðŸ’¾ SAVE QUOTE
                                        </button>
                                    </div>
                                </div>

                                {message && (
                                    <div className="mt-4 bg-white/20 rounded-lg p-3">
                                        <p className="text-white font-medium">{message}</p>
                                    </div>
                                )}
                            </div>

                            {/* Workspace Configuration */}
                            <div className="bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <Database className="w-6 h-6 text-pink-500" />
                                    <h2 className="text-xl font-semibold text-gray-800">Workspace Configuration</h2>
                                </div>
                                
                                <div className="grid md:grid-cols-3 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">BI Workspaces</label>
                                        <input 
                                            type="number"
                                            className="w-full p-3 border border-gray-300 rounded-lg"
                                            value={formData.biWorkspaces}
                                            onChange={(e) => handleInputChange('biWorkspaces', e.target.value)}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">AI Workspaces</label>
                                        <input 
                                            type="number"
                                            className="w-full p-3 border border-gray-300 rounded-lg"
                                            value={formData.aiWorkspaces}
                                            onChange={(e) => handleInputChange('aiWorkspaces', e.target.value)}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">LLM Provider</label>
                                        <select 
                                            className="w-full p-3 border border-gray-300 rounded-lg"
                                            value={formData.llmProvider}
                                            onChange={(e) => handleInputChange('llmProvider', e.target.value)}
                                        >
                                            <option value="">Select Provider</option>
                                            <option value="Customer">Customer</option>
                                            <option value="GoodData">GoodData</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            {/* Total Display */}
                            <div className="bg-gradient-to-r from-purple-900 to-pink-500 text-white rounded-xl p-8 text-center">
                                <h2 className="text-2xl font-semibold mb-4">Total Annual Contract Value</h2>
                                <div className="text-5xl font-bold mb-2">
                                    ${calculateTotal().toLocaleString()}
                                </div>
                                <div className="text-lg opacity-90">
                                    Monthly: ${(calculateTotal()/12).toLocaleString()}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<GoodDataCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
