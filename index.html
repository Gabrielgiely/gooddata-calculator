const handleInputChange = (field, value) => {<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoodData Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .lucide { width: 1em; height: 1em; stroke: currentColor; stroke-width: 2; fill: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Simple icons
        const Calculator = () => (
            <svg className="lucide" viewBox="0 0 24 24">
                <rect width="16" height="20" x="4" y="2" rx="2"/>
                <line x1="8" x2="16" y1="6" y2="6"/>
            </svg>
        );

        const Database = () => (
            <svg className="lucide" viewBox="0 0 24 24">
                <ellipse cx="12" cy="5" rx="9" ry="3"/>
                <path d="m3 5v14c0 3 4 3 9 3s9 0 9-3V5"/>
            </svg>
        );

        const Users = () => (
            <svg className="lucide" viewBox="0 0 24 24">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
            </svg>
        );

        const Building = () => (
            <svg className="lucide" viewBox="0 0 24 24">
                <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/>
                <path d="M6 12h4"/>
            </svg>
        );

        const DollarSign = () => (
            <svg className="lucide" viewBox="0 0 24 24">
                <line x1="12" x2="12" y1="2" y2="22"/>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
        );

        const Globe = () => (
            <svg className="lucide" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"/>
                <path d="m12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/>
            </svg>
        );

        // Supabase Storage
        class SupabaseStorage {
            constructor() {
                this.supabaseUrl = 'https://ysaxvpcwlmxdbietmjrl.supabase.co';
                this.supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlzYXh2cGN3bG14ZGJpZXRtanJsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NzQwOTYsImV4cCI6MjA2NTI1MDA5Nn0.SnjvZx-xVMwtPBe62xY66y6vi1CQq4F04AOy53oRPDE';
                this.quotes = new Map();
                this.isProduction = window.location.hostname !== 'claude.ai';
            }

            async save(code, data) {
                this.quotes.set(code, { data, timestamp: new Date().toISOString() });
                if (this.isProduction) {
                    try {
                        const response = await fetch(`${this.supabaseUrl}/rest/v1/Quotes`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'apikey': this.supabaseKey,
                                'Authorization': `Bearer ${this.supabaseKey}`
                            },
                            body: JSON.stringify({ code, data, created_at: new Date().toISOString() })
                        });
                        return { success: response.ok, code, cloudSaved: response.ok };
                    } catch (error) {
                        return { success: false, code, error: error.message };
                    }
                }
                return { success: true, code, cloudSaved: false };
            }

            async load(code) {
                if (this.quotes.has(code)) {
                    const quoteData = this.quotes.get(code);
                    return { success: true, data: quoteData.data, code };
                }
                return { success: false, error: 'Quote not found', code };
            }
        }

        const cloudStorage = new SupabaseStorage();

        function GoodDataCalculator() {
            const [templateCode, setTemplateCode] = useState('');
            const [message, setMessage] = useState('');
            const [loading, setLoading] = useState(false);
            const [editMode, setEditMode] = useState(false);
            
            const [formData, setFormData] = useState({
                prospectName: '',
                clientWebsite: '',
                annualRevenue: '',
                budget: '',
                objectives: '',
                usageScope: '',
                monetization: '',
                growthOpportunity: '',
                totalWorkspaces: '',
                biWorkspaces: '',
                aiWorkspaces: '',
                llmProvider: '',
                package: '',
                professionalServices: '',
                additionalEnvironments: false,
                samlOidc: false,
                dataCenterRegions: false,
                usageAnalytics: false,
                auditLog: false,
                hipaaCompliance: false
            });

            const [pricing, setPricing] = useState({
                platformFee: 36000,
                biWorkspacePrice: 25,
                aiWorkspacePrice: 10,
                advisory: 10000,
                analytics: 37500,
                endToEnd: 100000,
                additionalEnvironments: 12000,
                samlOidc: 3000,
                dataCenterRegions: 5000,
                usageAnalytics: 2500,
                auditLog: 3000,
                hipaaCompliance: 8000,
                llmPackages: {
                    'Customer': { 'Small': 100, 'Medium': 430, 'Large': 750 },
                    'GoodData': { 'Small': 200, 'Medium': 750, 'Large': 900 }
                }
            });

            const updatePricing = (field, value) => {
                setPricing(prev => ({ ...prev, [field]: parseInt(value) || 0 }));
            };

            const updateLLMPricing = (provider, size, value) => {
                setPricing(prev => ({
                    ...prev,
                    llmPackages: {
                        ...prev.llmPackages,
                        [provider]: {
                            ...prev.llmPackages[provider],
                            [size]: parseInt(value) || 0
                        }
                    }
                }));
            };
                setFormData(prev => {
                    const newData = { ...prev, [field]: value };
                    if (field === 'totalWorkspaces') {
                        newData.biWorkspaces = value;
                    }
                    return newData;
                });
            };

            const calculateTotal = () => {
                const bi = parseInt(formData.biWorkspaces) || 0;
                const ai = parseInt(formData.aiWorkspaces) || 0;
                let total = pricing.platformFee + (bi * pricing.biWorkspacePrice * 12) + (ai * pricing.aiWorkspacePrice * 12);
                
                if (formData.llmProvider && formData.package) {
                    const monthlyCost = pricing.llmPackages[formData.llmProvider]?.[formData.package] || 0;
                    total += monthlyCost * 12;
                }
                
                if (formData.professionalServices === 'Advisory') total += pricing.advisory;
                if (formData.professionalServices === 'Analytics') total += pricing.analytics;
                if (formData.professionalServices === 'End-to-end') total += pricing.endToEnd;
                if (formData.additionalEnvironments) total += pricing.additionalEnvironments;
                if (formData.samlOidc) total += pricing.samlOidc;
                if (formData.dataCenterRegions) total += pricing.dataCenterRegions;
                if (formData.usageAnalytics) total += pricing.usageAnalytics;
                if (formData.auditLog) total += pricing.auditLog;
                if (formData.hipaaCompliance) total += pricing.hipaaCompliance;
                
                return total;
            };

            const getProfessionalServicesCost = () => {
                if (formData.professionalServices === 'Advisory') return pricing.advisory;
                if (formData.professionalServices === 'Analytics') return pricing.analytics;
                if (formData.professionalServices === 'End-to-end') return pricing.endToEnd;
                return 0;
            };

            const generateCode = () => {
                let companyPart = 'PROSPECT';
                if (formData.prospectName) {
                    companyPart = formData.prospectName.replace(/[^a-zA-Z0-9]/g, '').toUpperCase().substring(0, 8);
                }
                const now = new Date();
                const monthNames = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];
                const month = monthNames[now.getMonth()];
                const day = now.getDate().toString().padStart(2, '0');
                return `${companyPart}-${month}${day}`;
            };

            const saveQuote = async () => {
                if (!formData.prospectName) {
                    setMessage('‚ùå Please enter a prospect name');
                    setTimeout(() => setMessage(''), 3000);
                    return;
                }

                const code = generateCode();
                setLoading(true);
                setMessage('üîÑ Saving quote...');
                
                try {
                    const result = await cloudStorage.save(code, formData);
                    if (result.success) {
                        setMessage(`‚úÖ Quote saved: ${code}`);
                    } else {
                        setMessage(`‚ùå Save failed: ${result.error}`);
                    }
                    setTimeout(() => setMessage(''), 5000);
                } catch (error) {
                    setMessage('‚ùå Save failed');
                    setTimeout(() => setMessage(''), 3000);
                }
                setLoading(false);
            };

            const loadQuote = async () => {
                if (!templateCode.trim()) {
                    setMessage('‚ùå Please enter a quote code');
                    setTimeout(() => setMessage(''), 3000);
                    return;
                }

                setLoading(true);
                setMessage('üîÑ Loading quote...');
                
                try {
                    const result = await cloudStorage.load(templateCode.toUpperCase());
                    if (result.success) {
                        setFormData(result.data);
                        setMessage(`‚úÖ Quote loaded: ${result.code}`);
                        setTemplateCode('');
                    } else {
                        setMessage(`‚ùå Quote not found: ${templateCode.toUpperCase()}`);
                    }
                    setTimeout(() => setMessage(''), 5000);
                } catch (error) {
                    setMessage('‚ùå Load failed');
                    setTimeout(() => setMessage(''), 3000);
                }
                setLoading(false);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 via-white to-violet-50 p-4">
                    <div className="max-w-6xl mx-auto">
                        
                        <div className="bg-gradient-to-r from-blue-600 to-indigo-500 rounded-xl shadow-xl text-white p-6 mb-6">
                            <div className="flex items-center gap-4">
                                <div className="bg-white/20 p-3 rounded-xl">
                                    <Globe className="w-8 h-8" />
                                </div>
                                <div className="flex-1">
                                    <h1 className="text-2xl font-bold mb-2">üåç GOODDATA CALCULATOR</h1>
                                    <div className="text-sm bg-white/20 rounded-lg p-3">
                                        Professional pricing calculator with detailed breakdown and quote sharing!
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl shadow-xl border border-gray-100 p-8 mb-8">
                            <div className="flex items-center gap-4 mb-6">
                                <h1 className="text-3xl font-bold bg-gradient-to-r from-purple-900 to-pink-500 bg-clip-text text-transparent">
                                    GoodData Professional Calculator
                                </h1>
                                <div className="bg-gradient-to-r from-purple-900 to-pink-500 p-3 rounded-xl">
                                    <Calculator className="w-8 h-8 text-white" />
                                </div>
                            </div>
                            
                            <div className="grid md:grid-cols-2 gap-4 mb-6">
                                <input 
                                    type="text"
                                    placeholder="Prospect/Customer Name *"
                                    className="w-full p-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    value={formData.prospectName}
                                    onChange={(e) => handleInputChange('prospectName', e.target.value)}
                                />
                                <input 
                                    type="url"
                                    placeholder="Client Website"
                                    className="w-full p-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    value={formData.clientWebsite}
                                    onChange={(e) => handleInputChange('clientWebsite', e.target.value)}
                                />
                            </div>
                            
                            <div className="bg-gradient-to-br from-green-600 to-emerald-500 rounded-xl text-white p-6 mb-6">
                                <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                                    <Database className="w-6 h-6" />
                                    Quote Management
                                </h2>
                                
                                <div className="grid md:grid-cols-2 gap-4 mb-4">
                                    <div className="bg-white/10 rounded-lg p-4">
                                        <h3 className="font-semibold mb-3">üì• Load Quote</h3>
                                        <div className="flex gap-2 mb-2">
                                            <input 
                                                type="text"
                                                placeholder="Enter code"
                                                value={templateCode}
                                                onChange={(e) => setTemplateCode(e.target.value)}
                                                className="flex-1 p-2 text-gray-900 rounded"
                                                disabled={loading}
                                            />
                                            <button
                                                onClick={loadQuote}
                                                disabled={loading}
                                                className="px-4 py-2 bg-white text-green-600 font-semibold rounded hover:bg-gray-50 disabled:opacity-50"
                                            >
                                                {loading ? 'üîÑ' : 'üì• LOAD'}
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-white/10 rounded-lg p-4">
                                        <h3 className="font-semibold mb-3">‚òÅÔ∏è Save Quote</h3>
                                        <button
                                            onClick={saveQuote}
                                            disabled={loading || !formData.prospectName}
                                            className="w-full bg-white text-green-600 font-semibold py-2 px-4 rounded hover:bg-gray-50 disabled:opacity-50 mb-2"
                                        >
                                            {loading ? 'üîÑ Saving...' : '‚òÅÔ∏è SAVE'}
                                        </button>
                                        {formData.prospectName && (
                                            <p className="text-white/80 text-sm">Code: <strong>{generateCode()}</strong></p>
                                        )}
                                    </div>
                                </div>

                                {message && (
                                    <div className="bg-white/20 rounded-lg p-3">
                                        <p className="text-white font-medium">{message}</p>
                                    </div>
                                )}
                            </div>

                            <div className="bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <Building className="w-6 h-6 text-purple-900" />
                                    <h2 className="text-xl font-semibold text-gray-800">Customer Profile</h2>
                                </div>
                                
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Annual Revenue (USD)</label>
                                        <select 
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white"
                                            value={formData.annualRevenue}
                                            onChange={(e) => handleInputChange('annualRevenue', e.target.value)}
                                        >
                                            <option value="">Select Range</option>
                                            <option value="< 10M">&lt; $10M</option>
                                            <option value="10M - 50M">$10M - $50M</option>
                                            <option value="50M - 100M">$50M - $100M</option>
                                            <option value="100M - 500M">$100M - $500M</option>
                                            <option value="500M+">$500M+</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Budget</label>
                                        <input 
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                            placeholder="e.g. $50K-100K annually"
                                            value={formData.budget}
                                            onChange={(e) => handleInputChange('budget', e.target.value)}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">What are they looking to achieve with GoodData?</label>
                                        <textarea 
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 resize-none"
                                            rows="4"
                                            placeholder="Describe their goals and objectives..."
                                            value={formData.objectives}
                                            onChange={(e) => handleInputChange('objectives', e.target.value)}
                                        />
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6">
                                <h2 className="text-xl font-semibold text-gray-800 mb-6">Usage Plan Assessment</h2>
                                
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-3">Usage by department or globally?</label>
                                        <div className="space-y-2">
                                            <label className="flex items-center">
                                                <input 
                                                    type="radio"
                                                    name="usageScope"
                                                    value="Department"
                                                    checked={formData.usageScope === 'Department'}
                                                    onChange={(e) => handleInputChange('usageScope', e.target.value)}
                                                    className="w-4 h-4 text-purple-600"
                                                />
                                                <span className="ml-2 text-gray-700">Department</span>
                                            </label>
                                            <label className="flex items-center">
                                                <input 
                                                    type="radio"
                                                    name="usageScope"
                                                    value="Globally"
                                                    checked={formData.usageScope === 'Globally'}
                                                    onChange={(e) => handleInputChange('usageScope', e.target.value)}
                                                    className="w-4 h-4 text-purple-600"
                                                />
                                                <span className="ml-2 text-gray-700">Globally</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-3">If they will monetize the product, how?</label>
                                        <div className="space-y-2">
                                            <label className="flex items-center">
                                                <input 
                                                    type="radio"
                                                    name="monetization"
                                                    value="YES"
                                                    checked={formData.monetization === 'YES'}
                                                    onChange={(e) => handleInputChange('monetization', e.target.value)}
                                                    className="w-4 h-4 text-purple-600"
                                                />
                                                <span className="ml-2 text-gray-700">YES</span>
                                            </label>
                                            <label className="flex items-center">
                                                <input 
                                                    type="radio"
                                                    name="monetization"
                                                    value="NO"
                                                    checked={formData.monetization === 'NO'}
                                                    onChange={(e) => handleInputChange('monetization', e.target.value)}
                                                    className="w-4 h-4 text-purple-600"
                                                />
                                                <span className="ml-2 text-gray-700">NO</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-3">Is there a significant growth opportunity here?</label>
                                        <div className="space-y-2">
                                            <label className="flex items-center">
                                                <input 
                                                    type="radio"
                                                    name="growthOpportunity"
                                                    value="YES"
                                                    checked={formData.growthOpportunity === 'YES'}
                                                    onChange={(e) => handleInputChange('growthOpportunity', e.target.value)}
                                                    className="w-4 h-4 text-purple-600"
                                                />
                                                <span className="ml-2 text-gray-700">YES</span>
                                            </label>
                                            <label className="flex items-center">
                                                <input 
                                                    type="radio"
                                                    name="growthOpportunity"
                                                    value="NO"
                                                    checked={formData.growthOpportunity === 'NO'}
                                                    onChange={(e) => handleInputChange('growthOpportunity', e.target.value)}
                                                    className="w-4 h-4 text-purple-600"
                                                />
                                                <span className="ml-2 text-gray-700">NO</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <Database className="w-6 h-6 text-pink-500" />
                                    <h2 className="text-xl font-semibold text-gray-800">Workspace Configuration</h2>
                                </div>
                                
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Total Workspaces</label>
                                        <input 
                                            type="number"
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                            value={formData.totalWorkspaces}
                                            onChange={(e) => handleInputChange('totalWorkspaces', e.target.value)}
                                            placeholder="Enter total number of workspaces"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">BI Workspaces</label>
                                        <input 
                                            type="number"
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                            value={formData.biWorkspaces}
                                            onChange={(e) => handleInputChange('biWorkspaces', e.target.value)}
                                            placeholder="Number of BI workspaces"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">AI Workspaces</label>
                                        <input 
                                            type="number"
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                            value={formData.aiWorkspaces}
                                            onChange={(e) => handleInputChange('aiWorkspaces', e.target.value)}
                                            placeholder="Number of AI workspaces"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">LLM Provider</label>
                                        <select 
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white"
                                            value={formData.llmProvider}
                                            onChange={(e) => handleInputChange('llmProvider', e.target.value)}
                                        >
                                            <option value="">Select Provider</option>
                                            <option value="Customer">Customer</option>
                                            <option value="GoodData">GoodData</option>
                                        </select>
                                    </div>
                                    
                                    {formData.llmProvider && (
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Package</label>
                                            <select 
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white"
                                                value={formData.package}
                                                onChange={(e) => handleInputChange('package', e.target.value)}
                                            >
                                                <option value="">Select Package</option>
                                                {formData.llmProvider === 'Customer' && (
                                                    <>
                                                        <option value="Small">Small - $100/month</option>
                                                        <option value="Medium">Medium - $430/month</option>
                                                        <option value="Large">Large - $750/month</option>
                                                    </>
                                                )}
                                                {formData.llmProvider === 'GoodData' && (
                                                    <>
                                                        <option value="Small">Small - $200/month</option>
                                                        <option value="Medium">Medium - $750/month</option>
                                                        <option value="Large">Large - $900/month</option>
                                                    </>
                                                )}
                                            </select>
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6">
                                <div className="flex items-center gap-3 mb-6">
                                    <Users className="w-6 h-6 text-blue-600" />
                                    <h2 className="text-xl font-semibold text-gray-800">Professional Services</h2>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Professional Services</label>
                                    <select 
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white"
                                        value={formData.professionalServices}
                                        onChange={(e) => handleInputChange('professionalServices', e.target.value)}
                                    >
                                        <option value="">Select Service</option>
                                        <option value="Advisory">Advisory Package - 80 hours - $10,000</option>
                                        <option value="Analytics">Analytics Package - 300 hours - $37,500</option>
                                        <option value="End-to-end">End-to-end Implementation - 800 hours - $100,000</option>
                                    </select>
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6">
                                <h2 className="text-xl font-semibold text-gray-800 mb-6">Premium Enterprise Features</h2>
                                
                                <div className="grid md:grid-cols-2 gap-4">
                                    {[
                                        { key: 'additionalEnvironments', label: 'Additional Environments', desc: 'Dev/Test/Staging environments', price: pricing.additionalEnvironments },
                                        { key: 'samlOidc', label: 'SAML & Multiple OIDC', desc: 'Enterprise SSO integration', price: pricing.samlOidc },
                                        { key: 'dataCenterRegions', label: 'Data Center Regions', desc: 'Multi-region deployment', price: pricing.dataCenterRegions },
                                        { key: 'usageAnalytics', label: 'Usage Analytics', desc: 'Advanced usage reporting', price: pricing.usageAnalytics },
                                        { key: 'auditLog', label: 'Audit Log', desc: 'Comprehensive audit trails', price: pricing.auditLog },
                                        { key: 'hipaaCompliance', label: 'HIPAA Compliance', desc: 'Healthcare data protection', price: pricing.hipaaCompliance }
                                    ].map(addon => (
                                        <label key={addon.key} className="flex items-start gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                            <input 
                                                type="checkbox"
                                                checked={formData[addon.key]}
                                                onChange={(e) => handleInputChange(addon.key, e.target.checked)}
                                                className="w-5 h-5 text-purple-600 border-gray-300 rounded mt-0.5"
                                            />
                                            <div className="flex-1">
                                                <div className="flex items-center justify-between mb-1">
                                                    <span className="text-gray-800 font-medium">{addon.label}</span>
                                                    <span className="text-purple-600 font-semibold">${addon.price.toLocaleString()}</span>
                                                </div>
                                                <p className="text-sm text-gray-600">{addon.desc}</p>
                                            </div>
                                        </label>
                                    ))}
                                </div>
                            </div>

                            {/* Total Display with Detailed Breakdown */}
                            <div className="bg-gradient-to-r from-purple-900 to-pink-500 text-white rounded-xl p-8">
                                <div className="text-center mb-6">
                                    <h2 className="text-2xl font-semibold mb-4 flex items-center justify-center gap-2">
                                        <DollarSign className="w-6 h-6" />
                                        Total Annual Contract Value
                                    </h2>
                                    <div className="text-5xl font-bold mb-2">
                                        ${calculateTotal().toLocaleString()}
                                    </div>
                                    <div className="text-lg opacity-90">
                                        Monthly: ${(calculateTotal()/12).toLocaleString()}
                                    </div>
                                </div>

                                {/* Detailed Pricing Breakdown */}
                                <div className="bg-white/10 rounded-lg p-6 space-y-4">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold">Pricing Breakdown</h3>
                                        <button
                                            onClick={() => setEditMode(!editMode)}
                                            className="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors"
                                        >
                                            {editMode ? '‚úÖ Done Editing' : '‚úèÔ∏è Edit Pricing'}
                                        </button>
                                    </div>
                                    
                                    {/* Platform Base Fee - Always shown */}
                                    <div className="flex justify-between items-center py-2 border-b border-white/20">
                                        <span className="text-white/90">Platform Base Fee</span>
                                        {editMode ? (
                                            <input
                                                type="number"
                                                value={pricing.platformFee}
                                                onChange={(e) => updatePricing('platformFee', e.target.value)}
                                                className="w-24 p-1 text-gray-900 rounded text-right"
                                            />
                                        ) : (
                                            <span className="font-semibold">${pricing.platformFee.toLocaleString()}</span>
                                        )}
                                    </div>

                                    {/* BI Workspaces - Only show if > 0 */}
                                    {formData.biWorkspaces && parseInt(formData.biWorkspaces) > 0 && (
                                        <div className="flex justify-between items-center py-2 border-b border-white/20">
                                            <span className="text-white/90">
                                                BI Workspaces ({formData.biWorkspaces} √ó ${editMode ? '' : pricing.biWorkspacePrice}/mo √ó 12)
                                                {editMode && (
                                                    <input
                                                        type="number"
                                                        value={pricing.biWorkspacePrice}
                                                        onChange={(e) => updatePricing('biWorkspacePrice', e.target.value)}
                                                        className="w-16 p-1 ml-2 text-gray-900 rounded text-center"
                                                    />
                                                )}
                                            </span>
                                            <span className="font-semibold">
                                                ${(parseInt(formData.biWorkspaces) * pricing.biWorkspacePrice * 12).toLocaleString()}
                                            </span>
                                        </div>
                                    )}

                                    {/* AI Workspaces - Only show if > 0 */}
                                    {formData.aiWorkspaces && parseInt(formData.aiWorkspaces) > 0 && (
                                        <div className="flex justify-between items-center py-2 border-b border-white/20">
                                            <span className="text-white/90">
                                                AI Workspaces ({formData.aiWorkspaces} √ó ${editMode ? '' : pricing.aiWorkspacePrice}/mo √ó 12)
                                                {editMode && (
                                                    <input
                                                        type="number"
                                                        value={pricing.aiWorkspacePrice}
                                                        onChange={(e) => updatePricing('aiWorkspacePrice', e.target.value)}
                                                        className="w-16 p-1 ml-2 text-gray-900 rounded text-center"
                                                    />
                                                )}
                                            </span>
                                            <span className="font-semibold">
                                                ${(parseInt(formData.aiWorkspaces) * pricing.aiWorkspacePrice * 12).toLocaleString()}
                                            </span>
                                        </div>
                                    )}

                                    {/* LLM Package - Only show if selected */}
                                    {formData.llmProvider && formData.package && (
                                        <div className="flex justify-between items-center py-2 border-b border-white/20">
                                            <span className="text-white/90">
                                                {formData.llmProvider} LLM {formData.package} (${editMode ? '' : pricing.llmPackages[formData.llmProvider]?.[formData.package] || 0}/mo √ó 12)
                                                {editMode && (
                                                    <input
                                                        type="number"
                                                        value={pricing.llmPackages[formData.llmProvider]?.[formData.package] || 0}
                                                        onChange={(e) => updateLLMPricing(formData.llmProvider, formData.package, e.target.value)}
                                                        className="w-16 p-1 ml-2 text-gray-900 rounded text-center"
                                                    />
                                                )}
                                            </span>
                                            <span className="font-semibold">
                                                ${((pricing.llmPackages[formData.llmProvider]?.[formData.package] || 0) * 12).toLocaleString()}
                                            </span>
                                        </div>
                                    )}

                                    {/* Professional Services - Only show if selected */}
                                    {formData.professionalServices && (
                                        <div className="flex justify-between items-center py-2 border-b border-white/20">
                                            <span className="text-white/90">
                                                Professional Services - {formData.professionalServices}
                                            </span>
                                            {editMode ? (
                                                <input
                                                    type="number"
                                                    value={getProfessionalServicesCost()}
                                                    onChange={(e) => {
                                                        const field = formData.professionalServices === 'Advisory' ? 'advisory' :
                                                                     formData.professionalServices === 'Analytics' ? 'analytics' : 'endToEnd';
                                                        updatePricing(field, e.target.value);
                                                    }}
                                                    className="w-24 p-1 text-gray-900 rounded text-right"
                                                />
                                            ) : (
                                                <span className="font-semibold">
                                                    ${getProfessionalServicesCost().toLocaleString()}
                                                </span>
                                            )}
                                        </div>
                                    )}

                                    {/* Premium Add-ons - Only show selected ones */}
                                    {[
                                        { key: 'additionalEnvironments', label: 'Additional Environments', field: 'additionalEnvironments' },
                                        { key: 'samlOidc', label: 'SAML & Multiple OIDC', field: 'samlOidc' },
                                        { key: 'dataCenterRegions', label: 'Data Center Regions', field: 'dataCenterRegions' },
                                        { key: 'usageAnalytics', label: 'Usage Analytics', field: 'usageAnalytics' },
                                        { key: 'auditLog', label: 'Audit Log', field: 'auditLog' },
                                        { key: 'hipaaCompliance', label: 'HIPAA Compliance', field: 'hipaaCompliance' }
                                    ].filter(addon => formData[addon.key]).map(addon => (
                                        <div key={addon.key} className="flex justify-between items-center py-2 border-b border-white/20">
                                            <span className="text-white/90">{addon.label}</span>
                                            {editMode ? (
                                                <input
                                                    type="number"
                                                    value={pricing[addon.field]}
                                                    onChange={(e) => updatePricing(addon.field, e.target.value)}
                                                    className="w-20 p-1 text-gray-900 rounded text-right"
                                                />
                                            ) : (
                                                <span className="font-semibold">${pricing[addon.field].toLocaleString()}</span>
                                            )}
                                        </div>
                                    ))}

                                    {/* Total Line */}
                                    <div className="flex justify-between items-center pt-4 text-lg font-bold border-t-2 border-white/30">
                                        <span>TOTAL ANNUAL</span>
                                        <span>${calculateTotal().toLocaleString()}</span>
                                    </div>
                                </div>

                                <div className="mt-4 text-sm bg-white/20 rounded-lg p-3">
                                    <strong>‚úÖ Working Calculator!</strong><br/>
                                    Complete pricing breakdown with Supabase cloud storage and cross-device quote sharing!
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<GoodDataCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
